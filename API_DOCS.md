# üì° API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤

## Endpoints

### GET `/api/reviews`
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Ç–∑—ã–≤—ã

**Request:**
```http
GET /api/reviews HTTP/1.1
Content-Type: application/json
```

**Response (Success):**
```json
{
  "success": true,
  "reviews": [
    {
      "id": "demo_1",
      "name": "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–æ–≤",
      "project": "–£—é—Ç",
      "rating": 5,
      "text": "–û—Ç–ª–∏—á–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è!...",
      "date": "2025-10-09T12:00:00.000Z",
      "approved": true
    }
  ],
  "count": 4
}
```

**Response (Error):**
```json
{
  "success": false,
  "error": "–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–∑—ã–≤–æ–≤"
}
```

---

### POST `/api/reviews`
–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –æ—Ç–∑—ã–≤

**Request:**
```http
POST /api/reviews HTTP/1.1
Content-Type: application/json

{
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "project": "–ì–∞—Ä–º–æ–Ω–∏—è",
  "rating": 5,
  "text": "–û—á–µ–Ω—å –¥–æ–≤–æ–ª—å–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º!"
}
```

**Validation Rules:**
- `name`: —Å—Ç—Ä–æ–∫–∞, 2-100 —Å–∏–º–≤–æ–ª–æ–≤, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ
- `project`: —Å—Ç—Ä–æ–∫–∞, 0-100 —Å–∏–º–≤–æ–ª–æ–≤, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- `rating`: —á–∏—Å–ª–æ, 1-5, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ
- `text`: —Å—Ç—Ä–æ–∫–∞, 10-1000 —Å–∏–º–≤–æ–ª–æ–≤, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ

**Response (Success):**
```json
{
  "success": true,
  "message": "–û—Ç–∑—ã–≤ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω",
  "review": {
    "id": "review_1729766400000_abc123",
    "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "project": "–ì–∞—Ä–º–æ–Ω–∏—è",
    "rating": 5,
    "text": "–û—á–µ–Ω—å –¥–æ–≤–æ–ª—å–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º!",
    "date": "2025-10-24T12:00:00.000Z",
    "approved": true
  }
}
```

**Response (Validation Error):**
```json
{
  "success": false,
  "error": "–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤"
}
```

**Response (Server Error):**
```json
{
  "success": false,
  "error": "–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—Ç–∑—ã–≤–∞"
}
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–∑—ã–≤–∞

```typescript
interface Review {
  id: string;           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
  name: string;         // –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞
  project: string;      // –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  rating: number;       // –û—Ü–µ–Ω–∫–∞ –æ—Ç 1 –¥–æ 5
  text: string;         // –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞
  date: string;         // ISO 8601 –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
  approved: boolean;    // –°—Ç–∞—Ç—É—Å –º–æ–¥–µ—Ä–∞—Ü–∏–∏
}
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### XSS Protection
–í—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç sanitization:
- HTML —Ç–µ–≥–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ HTML entities

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –ø–æ–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–π

### CORS
API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç CORS –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º.

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### JavaScript (Fetch)

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–∑—ã–≤—ã
async function getReviews() {
  const response = await fetch('/api/reviews');
  const data = await response.json();
  return data.reviews;
}

// –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
async function addReview(review) {
  const response = await fetch('/api/reviews', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(review)
  });
  return await response.json();
}
```

### cURL

```bash
# –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–∑—ã–≤—ã
curl https://your-site.vercel.app/api/reviews

# –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
curl -X POST https://your-site.vercel.app/api/reviews \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–¢–µ—Å—Ç",
    "project": "–£—é—Ç",
    "rating": 5,
    "text": "–û—Ç–ª–∏—á–Ω—ã–π –¥–æ–º!"
  }'
```

---

## –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö

### –í–∞—Ä–∏–∞–Ω—Ç 1: In-Memory (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –û—Ç–∑—ã–≤—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏
- –ë—ã—Å—Ç—Ä–æ –∏ –ø—Ä–æ—Å—Ç–æ
- –ú–æ–≥—É—Ç –±—ã—Ç—å –ø–æ—Ç–µ—Ä—è–Ω—ã –ø—Ä–∏ cold start

### –í–∞—Ä–∏–∞–Ω—Ç 2: Vercel KV (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Redis
- –ù–∞–¥–µ–∂–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ
- –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–º. DEPLOYMENT.md)

---

## –î–µ–º–æ-–æ—Ç–∑—ã–≤—ã

API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 4 –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–æ–≤ (–£—é—Ç) ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
- –ú–∞—Ä–∏—è –°–æ–∫–æ–ª–æ–≤–∞ (–ì–∞—Ä–º–æ–Ω–∏—è) ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
- –î–º–∏—Ç—Ä–∏–π –ò–≤–∞–Ω–æ–≤ (–°–∏–º—Ñ–æ–Ω–∏—è) ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
- –ï–ª–µ–Ω–∞ –ú–æ—Ä–æ–∑–æ–≤–∞ (–ü—Ä–µ–º–∏—É–º) ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

–û–Ω–∏ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã –∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã.

---

## Rate Limits

### Vercel Free Plan:
- 1,000 requests/day per function
- 100 GB-Hours compute/month

–î–ª—è —Å–∞–π—Ç–∞ —Å –æ—Ç–∑—ã–≤–∞–º–∏ —ç—Ç–æ–≥–æ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ!

---

## Troubleshooting

### 404 Not Found
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ:
- –§–∞–π–ª `api/reviews.js` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- `vercel.json` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–µ–∫—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω

### 500 Internal Server Error
–°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
```bash
vercel logs
```

### CORS Error
API —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å CORS headers. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–º–µ–Ω.

---

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API

### –î–æ–±–∞–≤–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞:
```javascript
// –í api/reviews.js
if (req.method === 'DELETE') {
  const { id } = req.body;
  // ... –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è
}
```

### –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏—é:
```javascript
// –í api/reviews.js –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—Ç–∑—ã–≤–∞
approved: false  // –í–º–µ—Å—Ç–æ true
```

–ó–∞—Ç–µ–º —Å–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è –æ—Ç–∑—ã–≤–æ–≤.

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í –ø–∞–Ω–µ–ª–∏ Vercel –¥–æ—Å—Ç—É–ø–Ω—ã:
- –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π

